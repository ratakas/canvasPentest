"use strict";

$(document).ready(function () {
  $('#sn_info').summernote({
    disableDragAndDrop: true,
    placeholder: 'Hello bootstrap 4',
    tabsize: 0.5,
    height: 200,
    blockquoteBreakingLevel: 2,
    lineHeight: 5
  });
  $('#sn_notes').summernote({
    disableDragAndDrop: true,
    placeholder: 'notas',
    toolbar: [// [groupName, [list of button]]
    ['style', ['bold', 'italic', 'underline', 'clear']], ['fontsize', ['fontname', 'fontsize']], ['para', ['ul', 'ol', 'paragraph']]],
    height: 200
  });
  $('#sn_all').summernote({
    disableDragAndDrop: true,
    placeholder: 'notas',
    toolbar: [// [groupName, [list of button]]
    ['style', ['style', 'bold', 'italic', 'underline', 'clear']], ['fontsize', ['fontname', 'fontsize']], ['para', ['ul', 'ol', 'paragraph']], ['para', ['height', 'hr', 'table', 'picture', 'link', 'video', 'redo', 'undo', 'codeview', 'fullscreen']]],
    height: 500
  });
  $('#sn_all').summernote('formatPara');
  $("#savework").click(function () {
    var dataspace = {
      "name": $("#ws_name").text(),
      "type": true
    };
    console.log(dataspace);
    $.ajax({
      url: '/workspace',
      type: 'post',
      dataType: 'json',
      contentType: 'application/json',
      data: JSON.stringify(dataspace),
      success: function success(result) {
        console.log(result); //create work

        var datawork = {
          "name": $("#w_name").text(),
          "host": $("#w_host").text(),
          "inforelevant": $("#sn_info").summernote('code'),
          "inforeview": $("#sn_notes").summernote('code'),
          "infoall": $("#sn_all").summernote('code'),
          "creationdate": "na",
          "state": true,
          "worksapce_id": result.id
        };
        $.ajax({
          url: '/works',
          type: 'post',
          dataType: 'json',
          contentType: 'application/json',
          data: JSON.stringify(datawork),
          success: function success(result2) {
            $("#savework").hide();
            $("#updatework").show();
            $("#w_id").html(result.id);
          },
          error: function error(result) {
            console.log(result);
          }
        });
      },
      error: function error(result) {
        console.log(result);
      }
    });
  });
});