var editor;
$(document).ready(function() {

    

    var columnDefs = [{
      data: "id",
      title: "ID",
      type: "readonly"
    }, {
      data: "utility",
      title: "Utility",
       width: "30%"
    }, {
       data: "command",
       title: "Command",
       width: "35%"
    }, {
        data: "moreinfo",
        title: "Info",
        width: "10%"
    }, {
        data: "created_at",
        title: "Create",
        type: "readonly"
    }];
  
    var myTable;
  
    myTable = $('#example').DataTable({
      "sPaginationType": "full_numbers",
      dom: 'Bfrtip',
      ajax: '/commands',
      columns: columnDefs,
            columnDefs: [
                {
                    render: function (data, type, full, meta) {
                        return "<div class='text-wrap width-200'>" + data + "</div>";
                    },
                    targets: 3
                }
             ],
            select: 'single',
            responsive: true,
            altEditor: true,     // Enable altEditor
            buttons: [{
              text: 'Add',
              name: 'add'        // do not change name
            },
            {
              extend: 'selected', // Bind to Selected row
              text: 'Edit',
              name: 'edit'        // do not change name
            },
            {
              extend: 'selected', // Bind to Selected row
              text: 'Delete',
              name: 'delete'      // do not change name
           }],
        onAddRow: function(datatable, rowdata, success, error) {          
            $.ajax({
                url: '/commands',
                type: 'post',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(rowdata),
                success: success,
                error: error
            })
            
        },
        onEditRow: function(datatable, rowdata, success, error) {
           console.log(rowdata);
           console.log(rowdata.id);
            var dataa= {
                utility : rowdata.utility,
                command : rowdata.command,
                moreinfo : rowdata.moreinfo
            };
            $.ajax({
                url: '/commands/'+rowdata.id,
                type: 'put',
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(dataa),
                success: success,
                error: error
            })
        },
        onDeleteRow: function(datatable, rowdata, success, error) {
            $.ajax({
                url: '/commands/'+rowdata.id,
                type: 'delete',
                dataType: 'json',
                contentType: 'application/json',
                success: success,
                error: error
            });
        }
    });
  
  
  });