
module.exports = app => {

    const itemsc = app.db.models.Itemsc;
    app.route('/api/scheduleitem')
    .get((req, res) => {
        itemsc.findAll({})
          .then(result => res.json(result))
          .catch(error => {
            res.status(412).json({msg: error.message});
          });
      })
    .post((req, res) => {
        itemsc.create(req.body)
          .then(result => {
            app.io.emit('additem', result);
            res.sendStatus(200);
          })
          .catch(error => {
            res.status(412).json({msg: error.message});
          });
      })
      .put( (req, res) => {
        itemsc.update({"state":req.body.state}, {where: {id : req.body.id} })
        .then(result => {
            app.io.emit('setitem', req.body);
            res.sendStatus(200);
        })
        .catch(error => {
            res.status(412).json({msg: error.message});
          });   
      })

    app.route('/api/schedulename')
    .put((req, res) => {
        itemsc.update({"task":req.body.task}, {where: {id : req.body.id} })
        .then(result => {
            app.io.emit('setNameItem', req.body);
            res.sendStatus(200);
        })
        .catch(error => {
            res.status(412).json({msg: error.message});
          }); 
      })

}